<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<system.diagnostics>
		<!-- Two techniques are used here. -->

		<!-- 1) Adding a listener directly to the trace source. -->
		<sources>
			<source
				name="traceSourceEx"
				switchName="sourceSwitch"
				switchType="System.Diagnostics.SourceSwitch">

				<listeners>

					<add
						name="console"
						type="System.Diagnostics.ConsoleTraceListener">
						<!-- Our filters are initialized with different source levels, which results 
							 in some messages being written by only one of the two listeners. -->
						<filter
							type="System.Diagnostics.EventTypeFilter"
							initializeData="Warning"/>
					</add>

					<!-- 3) Add a shared listener to the trace source. -->
					<add name="mySharedListener"/>

					<remove name="Default"/>
				</listeners>
			</source>
		</sources>
		<switches>
			<add name="sourceSwitch" value="Warning"/>
		</switches>

		<!-- 2) Adding a listener to the shared listeners collection and then
		    (step 3 above) adding that by name to the trace source's listeners collection. -->
		<sharedListeners>
			<add
				name="mySharedListener"
				type="System.Diagnostics.TextWriterTraceListener"
				initializeData="mySharedListener.log">

				<filter
					type="System.Diagnostics.EventTypeFilter"
					initializeData="Error"/>
			</add>
		</sharedListeners>
	</system.diagnostics>
	<startup>
		<supportedRuntime
			version="v4.0"
			sku=".NETFramework,Version=v4.5" />
	</startup>
</configuration>